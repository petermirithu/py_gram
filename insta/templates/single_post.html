{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}
<div class="container">
  <div class="row">                 
    <div class="col-md-6">
      <img src="{{post.image.cdn_url}}" width="400px" height="450px"alt="{{post.image_name}}">          
    </div>  
    <div class="col-md-6">  
      <div class="card">        
        <div class="card-header"><h3>{{post.image_name}}</h3></div>
        <div class="card-body">
          {% autoescape on %}
            <h6>{{post.caption|safe}}</h6>
          {% endautoescape %}
        </div>                
        <div class="card-footer">
          <p>Posted by: {{post.posted_by}}</p>
          <p>Posted on: {{post.posted_on}}</p>
          <p>Likes </p>
          <p>Comments: {{comments|length}}</p>              
        </div>  
      </div>  
    </div>    
  </div>  
  <h4>Add a comment</h4>
  <form action="/single_post/{{post.id}}" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {% bootstrap_form form %}
    <button type="submit" class="btn btn-outline-primary">Post</button>
  </form>
  <h3>Comments</h3>     
  <div class="row">  
    <div class="col-md-12">
      {% if comments %}
        {% for comment in comments %}        
          <div class="card bg-transparent">
            <h6>{{comment.body}}</h6>
            <p><small class="text-dark">{{comment.posted_by}}</small></p>              
          </div>
          <br>        
        {% endfor %}
      {% else %}
        <p class="alert alert-danger">No Comment posted</p>
      {% endif %}      
    </div>
  </div>
</div>    

{% endblock %}     
  